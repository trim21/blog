<!DOCTYPE HTML><html><head><meta charset="utf-8"><title>Trim21&#39;s Blog</title><meta name="author" content="Trim21"><meta id="viewport" name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta property="og:site_name" content="Trim21&#39;s Blog"><meta property="og:image" content="/favicon.ico"><link href="/favicon.ico" rel="icon"><link rel="alternate" href="/atom.xml" title="Trim21&#39;s Blog" type="application/atom+xml"><link rel="stylesheet" href="/css/style.css" media="screen"><meta name="generator" content="Hexo 6.2.0"></head><body><div class="blog"><div class="content"><header><div class="site-branding"><h1 class="site-title"><a href="/">Trim21&#39;s Blog</a></h1><p class="site-description"></p></div><nav class="site-navigation"><ul></ul></nav></header><main class="site-main posts-loop"><article><h3 class="article-title"><a href="/2019/12/caddy-not-working-in-nat.html"><span>caddy在内网中无法更新证书</span></a></h3><div class="article-top-meta"><span class="posted-on"><a href="/2019/12/caddy-not-working-in-nat.html" rel="bookmark"><time class="entry-date published" datetime="2019-12-23T07:31:10.000Z">2019-12-23</time></a></span></div><div class="article-content"><div class="entry"><p>NAS 上面运行了一个 caddy 服务器，还设置了 https。最近突然遇到了证书过期的问题.</p><p>检查 log 发现是证书申请失败 <code>SERVFAIL for _acme-challenge.my_domain.</code></p><p>大概搜索了一下, 是因为路由器的 dnsmasq 过滤掉了完成验证需要的 dns 查询</p><p>只要在 dnsmasq 设置中把 filterwin2k 参数禁用即可, 不同版本的 dnsmasq 禁用方法有些不同</p></div></div><div class="article-footer"><div class="article-meta pull-left"><span class="post-categories"><i class="icon-categories"></i> <a href="/categories/编程/">编程</a> </span><span class="post-tags"><i class="icon-tags"></i> <a href="/tag/https/">https</a></span></div></div></article><article><h3 class="article-title"><a href="/2019/12/build-a-nas.html"><span>利用手头已有资源尽可能高配的搭一台nas</span></a></h3><div class="article-top-meta"><span class="posted-on"><a href="/2019/12/build-a-nas.html" rel="bookmark"><time class="entry-date published" datetime="2019-12-22T16:00:00.000Z">2019-12-22</time></a></span></div><div class="article-content"><div class="entry"><p>现成已有的 nas：一台蜗牛星际 B 口单百兆，现在放了四块 500G 的硬盘租了一个 raid6。除去硬盘成本 268（机器）+200（电源）, 硬盘是旧硬盘. 用了三四个月之后已经有三四块硬盘报警了.</p><p>总是觉得有些不爽，主要是又不想把现有 nas 里面的数据都拷出来换硬盘，又觉得现在的百兆和 1T 容量不太能让人满意，所以想搞一个千兆的高性能 nas。</p><p>看了看市面上 nas 的价格，感觉硬件配置又不太对的起价格，于是决定自己搞一个。正好自己现在还闲置着一台核显的 itx 小机器</p></div></div><div class="article-footer"><div class="article-meta pull-left"><span class="post-tags"><i class="icon-tags"></i> <a href="/tag/nas/">nas</a></span></div></div></article><article><h3 class="article-title"><a href="/2019/12/pyenv-build-python.html"><span>用pyenv安装python</span></a></h3><div class="article-top-meta"><span class="posted-on"><a href="/2019/12/pyenv-build-python.html" rel="bookmark"><time class="entry-date published" datetime="2019-12-22T16:00:00.000Z">2019-12-22</time></a></span></div><div class="article-content"><div class="entry"><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/pyenv/pyenv">pyenv</a>是用来安装多个版本的 python</p></div></div><div class="article-footer"><div class="article-meta pull-left"><span class="post-tags"><i class="icon-tags"></i> <a href="/tag/python/">python</a><a href="/tag/linux/">linux</a></span></div></div></article><article><h3 class="article-title"><a href="/2019/10/migrate-to-rime.html"><span>输入法切换到Rime</span></a></h3><div class="article-top-meta"><span class="posted-on"><a href="/2019/10/migrate-to-rime.html" rel="bookmark"><time class="entry-date published" datetime="2019-10-22T16:00:00.000Z">2019-10-22</time></a></span></div><div class="article-content"><div class="entry"><p>QQ 拼音终于也开始弹广告了，所以一怒之下准备删了。</p><p>又不能没输入法用，就用上了小狼毫。记录一下这中间遇到的若干坑。</p></div></div><div class="article-footer"><div class="article-meta pull-left"><span class="post-categories"><i class="icon-categories"></i> <a href="/categories/工具/">工具</a></span></div></div></article><article><h3 class="article-title"><a href="/2019/06/set-proxy-for-win10-store.html"><span>给win10应用商店设置代理</span></a></h3><div class="article-top-meta"><span class="posted-on"><a href="/2019/06/set-proxy-for-win10-store.html" rel="bookmark"><time class="entry-date published" datetime="2019-06-26T13:32:31.000Z">2019-06-26</time></a></span></div><div class="article-content"><div class="entry"><p>最近网络状况实在是不好,用 win10 应用商店下载应用怎么也不成功.修改系统代理也不管用.<br>参照<a target="_blank" rel="noopener external nofollow noreferrer" href="https://sspai.com/post/41137">少数派的这篇文章</a>设置了代理,总算是解决了问题.</p></div></div><div class="article-footer"><div class="article-meta pull-left"><span class="post-categories"><i class="icon-categories"></i> <a href="/categories/编程/">编程</a> </span><span class="post-tags"><i class="icon-tags"></i> <a href="/tag/python/">python</a><a href="/tag/windows/">windows</a></span></div></div></article><article><h3 class="article-title"><a href="/2019/06/build-python-package-with-pyinstaller.html"><span>用PyInstaller打包python应用</span></a></h3><div class="article-top-meta"><span class="posted-on"><a href="/2019/06/build-python-package-with-pyinstaller.html" rel="bookmark"><time class="entry-date published" datetime="2019-06-02T15:47:34.000Z">2019-06-02</time></a></span></div><div class="article-content"><div class="entry"><p>那天突然好奇，<code>docker-compose</code>是用什么语言写的。然后一看，发现居然是用 python2 写的。</p><p>但想到我安装的时候从来没在乎过机器上有没有安装 python，或者我的 python 版本是多少，而是按照官网的文档，直接下载一个二进制文件来安装的。突然眼前一亮。看了一下对应的构建代码，发现他是用<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/pyinstaller/pyinstaller"><code>PyInstaller</code></a>来进行打包的，把一个 python 应用打包成单个的二进制文件。</p><p>一般来说，正常的 python 包的分发会基于 pip 的，发布到 pypi 和用户下载的都是代码文件（和其他语言编译的二进制文件），如果依赖于其他的 package 会在安装的时候再进行下载。</p><p>但用<code>PyInstaller</code>，打包出来的可执行文件中包含了所有用到的依赖和 python 解释器，并不需要本机安装了 python 或者 pip，像 docker-compose 这样的工具，打包之后成一个单文件，对于用户在安装和使用的时候都会方便许多，而对于我们开发者来说，就不用考虑兼容旧的 python 版本，可以直接使用 python3.6 的新语法如 type annotation 等，使用某些只有 python3.6 以上版本才能用的依赖库，自然也比原来爽了许多。</p></div></div><div class="article-footer"><div class="article-meta pull-left"><span class="post-categories"><i class="icon-categories"></i> <a href="/categories/编程/">编程</a> </span><span class="post-tags"><i class="icon-tags"></i> <a href="/tag/python/">python</a></span></div></div></article><article><h3 class="article-title"><a href="/2019/03/join-python-zh-cn-translaters.html"><span>参与python文档的中文翻译</span></a></h3><div class="article-top-meta"><span class="posted-on"><a href="/2019/03/join-python-zh-cn-translaters.html" rel="bookmark"><time class="entry-date published" datetime="2019-03-30T17:28:36.000Z">2019-03-30</time></a></span></div><div class="article-content"><div class="entry"><p>今天看到这个帖子<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.v2ex.com/t/550164">别开心太早， Python 官方文档的翻译差远了 - V2EX</a> 发现参与 python 文档翻译的门槛还挺低的，就尝试了一下翻译了两段文档.</p><h2 id="参与翻译的方法">参与翻译的方法</h2></div></div><div class="article-footer"><div class="article-meta pull-left"><span class="post-categories"><i class="icon-categories"></i> <a href="/categories/编程/">编程</a> </span><span class="post-tags"><i class="icon-tags"></i> <a href="/tag/python/">python</a></span></div></div></article><article><h3 class="article-title"><a href="/2018/11/learning-golang.html"><span>golang笔记</span></a></h3><div class="article-top-meta"><span class="posted-on"><a href="/2018/11/learning-golang.html" rel="bookmark"><time class="entry-date published" datetime="2018-11-01T09:25:15.000Z">2018-11-01</time></a></span></div><div class="article-content"><div class="entry"><h2 id="一些约定">一些约定</h2><ol><li>使用驼峰命名法</li><li>首字母小写的变量/函数只能在包内使用(多按一次 shift 我要累死了, 虽然编辑器有时在小写输入的情况下也会自动补全大写内容, 但有时不是那么聪明)</li></ol></div></div><div class="article-footer"><div class="article-meta pull-left"><span class="post-tags"><i class="icon-tags"></i> <a href="/tag/golang/">golang</a></span></div></div></article><article><h3 class="article-title"><a href="/2018/10/use-vue-in-userscript.html"><span>在UserScript中使用Vue</span></a></h3><div class="article-top-meta"><span class="posted-on"><a href="/2018/10/use-vue-in-userscript.html" rel="bookmark"><time class="entry-date published" datetime="2018-10-11T07:26:00.000Z">2018-10-11</time></a></span></div><div class="article-content"><div class="entry"><p>之前写了一个用户脚本, <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Trim21/bgm-tv-auto-tracker">在站外一键点 bgm 格子</a> 为了添加一个 UI, 但又不想用 jQuery 手动绑一堆事件, 就直接上了 Vue. 所以需要用 Webpack 打包对应的 vue 文件到 userscript 里.</p></div></div><div class="article-footer"><div class="article-meta pull-left"><span class="post-tags"><i class="icon-tags"></i> <a href="/tag/javascript/">javascript</a><a href="/tag/vue/">vue</a><a href="/tag/userscript/">userscript</a></span></div></div></article><article><h3 class="article-title"><a href="/2018/10/bgm.tv-ip-viewer.html"><span>生成bgm.tv关联条目网络</span></a></h3><div class="article-top-meta"><span class="posted-on"><a href="/2018/10/bgm.tv-ip-viewer.html" rel="bookmark"><time class="entry-date published" datetime="2018-10-11T02:50:36.000Z">2018-10-11</time></a></span></div><div class="article-content"><div class="entry"><p>本项目已弃坑。</p><p>先放成品 <a target="_blank" rel="noopener external nofollow noreferrer" href="http://bgm-ip-viewer.trim21.cn">bgm-ip-viewer</a></p><p>在 bgm 上看到有人说现在的关联图只有一层, 看起来不太方便, 就爬了全站数据做了这么个东西.</p></div></div><div class="article-footer"><div class="article-meta pull-left"><span class="post-tags"><i class="icon-tags"></i> <a href="/tag/nodejs/">nodejs</a><a href="/tag/bgm/">bgm</a></span></div></div></article><nav class="pagination"><a href="/page/2/" class="pagination-next">Next</a></nav></main><footer class="site-footer"><p class="site-info">Proudly powered by <a href="https://hexo.io/" rel="external nofollow noreferrer" target="_blank">Hexo</a> and Theme by <a href="https://github.com/CodeDaraW/Hacker" rel="external nofollow noreferrer" target="_blank">Hacker</a><br>&copy; 2022 Trim21</p></footer></div></div></body></html>