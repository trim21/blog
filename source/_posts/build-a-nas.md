---
title: 利用手头已有资源尽可能高配的搭一台nas
date: 2019-12-23
tags:
  - nas
---

现成已有的 nas：一台蜗牛星际 B 口单百兆，现在放了四块 500G 的硬盘租了一个 raid6。除去硬盘成本 268（机器）+200（电源）, 硬盘是旧硬盘. 用了三四个月之后已经有三四块硬盘报警了.

总是觉得有些不爽，主要是又不想把现有 nas 里面的数据都拷出来换硬盘，又觉得现在的百兆和 1T 容量不太能让人满意，所以想搞一个千兆的高性能 nas。

看了看市面上 nas 的价格，感觉硬件配置又不太对的起价格，于是决定自己搞一个。正好自己现在还闲置着一台核显的 itx 小机器

<!-- more -->

## 手头硬件

### CPU 和主板

1. 四代 i3 主板 4 个 sata3, 一个 m2 接口, 一个 pci-e 16x 接口, 两个 ddr4 内存接口
2. J1900, 主板两个 sata2 接口, 两个 ddr3 内存接口.

### 内存

两条 4g 台式机 ddr4 内存

一条 ddr3 内存接口

### 硬盘

1. 闪迪 Sata3 256G SSD
2. 两条杂牌 M2 128G SSD
3. 两块 2.5 寸机械硬盘 500G 1T
4. 五块 3.5 寸机械硬盘 均 500G, 目前看来是不够的, 还会再买.

购入 256g nvme ssd 一条, 牌子就不说了

### 机箱

1. 蜗牛星际 B 款 不是前面提到的已经在用的 nas, 是双十一新买的, 50+邮费 20
2. 迎广 肖邦 只有两个硬盘位, 用不上.
3. 一台工控机, 只有两个硬盘位, 更用不上.

## 需求

1. 用来跑数据库, 比如 mysql, mongodb, redis 等等, 需要跑在两块 raid1 硬盘上.
2. 挂 bt, 不需要 raid.
3. 备份电脑数据, 跟(1)一起放在 raid1 上.

所以需要购买的只有几块硬盘和新电源. 星际蜗牛的 4 个硬盘位已经足够了. 两块硬盘组 raid1, 两块硬盘直接用.

如果以后需求大了, 需要升级更多硬盘的话, 可以换一个新的机箱, 用 pcie 接一个阵列卡, 最多能支持 12 块硬盘.

最后选择了蜗牛星际的廉价机箱, 到手之后是 B 款. 硬盘还没买. 先用了剩下的四块硬盘硬盘.

硬盘还没选好, 先把其他的硬件装起来了.

![机箱架子](../static/nas/bd69bf14ly1ga6r768jf7j23402c04qx.jpg)
![正面](../static/nas/bd69bf14ly1ga6r674zqxj22c0340kjt.jpg)

![之前的itx机箱](../static/nas/bd69bf14ly1ga6r542c9aj22c0340e8a.jpg)

空间非常紧张, 说紧凑也行

![好几年没见](../static/nas/bd69bf14ly1ga6r4qqltgj22c0340b2g.jpg)

![CPU背板](../static/nas/bd69bf14ly1ga6r47dg8gj22c03407wr.jpg)

已经有点生锈了

![20191222_152216649_iOS.heic](../static/nas/bd69bf14ly1ga6r3qvkv5j22c03407wq.jpg)

这个机箱要把所有的线接上之后再把主板扣上去.

原装散热器的高度是足够的, 为了方便安装我还是换了一个比较矮的`IS-30`, 高度 3cm, 是一开始担心原装散热器太高买的.

## 系统

纠结了半天, 还是没直接用 debian 或者 ubuntu 这种发行版, 选择了 OpenMediaVault.

用了一天, 很满足我的需求(因为我经常会 ssh 上去), 但是单纯作为 nas 的话, web 界面功能想必万由易用性还是差很多.
